---
layout: page
title: Detection
summary: "It explains how to detect somatic mutations in cancer samples, 
which variant callers are available, and how to customize the detection process."
---

--- 
Starting from BAM files, 
**Musta** efficiently performs variant calling in either tumor-normal matched mode or tumor-only mode, 
depending on the provided input files for each sample. 
To ensure the highest accuracy, **Musta** utilizes a combination of six powerful variant callers:


* [Mutect2](https://gatk.broadinstitute.org/hc/en-us/articles/360037593851-Mutect2)
* [Strelka2](https://github.com/Illumina/strelka)
* [MuSe](https://bioinformatics.mdanderson.org/public-software/muse/) 
* [VarScan](https://varscan.sourceforge.net/)
* [VarDict](https://github.com/AstraZeneca-NGS/VarDict) 
* [LoFreq](https://csb5.github.io/lofreq/).

To achieve a refined and accurate consensus, an ensemble approach is employed, 
utilizing the machine learning-based algorithm of [SomaticSeq](https://bioinform.github.io/somaticseq/).

---

## Basic Usage

The Detection module within **Musta** provides users with the capability to initiate variant calling processes. 
To execute this module, you can use the following basic **Musta** command structure:

```shell
musta detect [OPTIONS]
```

Here's breakdown of each option available in the Musta Detection module:

**General Options:**
- `-h`, `--help`: Show the help message and exit.

**Required Options:**
- `--workdir PATH` (`-w PATH`): Specifies the destination folder for analysis. This is where the Snakemake pipeline, logs, and analysis outputs will be located.
- `--samples-file PATH` (`-s PATH`): Points to a YAML file listing the datasets you wish to analyze. This file provides information about the samples to be processed. For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#input-datasets).
- `--reference-file PATH` (`-r PATH`): Identifies the path to the reference FASTA file, which is essential for the analysis. For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#reference-file).
- `--bed-file PATH` (`-b PATH`): Points to a compressed and indexed BED file. This file lists the regions that the analysis should be restricted to. For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#bed-file).

**Optional Options:**
- `--variant-file PATH` (`-v PATH`): Specifies the path to a VCF file containing variants and allele frequencies (used only when running **Mutect**). For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#variant-file). 
- `--germline-resource PATH` (`-g PATH`): Indicates the path to a population VCF of germline sequencing data. This file contains allele fractions and is used only when running **Mutect**. For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#germline-resource).
- `--dbsnp-file PATH` (`-db PATH`): Specifies the path to a compressed and indexed VCF file containing known germline variants. This option is used exclusively when running **LoFreq** and/or **MuSe**.For further details, please refer to the [dedicate section]({{site.url}}/pages/03.config/#dbsnp-file).
- `--tmpdir PATH` (`-t PATH`): Specifies the path to the temporary directory. Ensure that this directory has sufficient storage capacity to hold the intermediate files generated during the analysis.

**Variant Caller Exclusion Options:**
- `--exclude-mutect` (`-emu`): Excludes the **Mutect** variant caller from the analys.
- `--exclude-lofreq` (`-elf`): Excludes the **LoFreq** variant caller from the analysis.
- `--exclude-strelka` (`-esk`): Excludes the **Strelka** variant caller from the analysis.
- `--exclude-muse` (`-ems`): Prevents the **MuSe** variant caller from running.
- `--exclude-varscan` (`-evs`): Excludes the **VarScan** variant caller from the analysis.
- `--exclude-vardict` (`-evd`): Prevents the **VarDict** variant caller from running.

**Variant Caller Filtering Options:**
- `--strict`: Runs only the restrictive variant callers, which include **Mutect**, **LoFreq**, and **Strelka**.
- `--soft`: Runs only the permissive variant callers, which include **VarScan**, **VarDict**, and **MuSe**.
- `--fast`: Executes only the fast variant callers, which are **LoFreq**, **VarScan**, **Strelka**, and **MuSe**.

**Additional Options:**
- `--force`, `-f`: Forces the re-creation of all output files.
- `--dryrun`, `-d`: Describes the workflow but does not execute it. This is useful for previewing the analysis steps before running them.
